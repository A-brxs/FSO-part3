{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Search","props","newSearch","handleSearch","console","log","name","value","onChange","PersonForm","process","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Filter","persons","search","deletePerson","filteredPersons","filter","who","toLowerCase","includes","map","person","number","onClick","Errornotif","message","className","Positivenotif","App","useState","setPersons","setNewName","setNewNumber","setSearch","notificationMessage","setNotificationMessage","errorMsg","setErrorMsg","addPerson","newid","p","personObject","Math","max","personSrv","updatePersons","showNotif","catch","error","setTimeout","checkPerson","find","updateNumber","newname","newnumber","window","confirm","newperson","newPersonObject","useEffect","event","target","preventDefault","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.2f8d4f26.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = (newObject) => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst remove = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default { \r\n  getAll, \r\n  create, \r\n  update,\r\n  remove \r\n}","import React, { useState, useEffect } from 'react'\nimport personSrv from './services/persons'\nimport './index.css'\n\nconst Search = (props) => {\n  const {newSearch, handleSearch} = props\n  console.log('Search loaded')\n  console.log('newSearch: ',newSearch)\n  console.log('handleSearch: ',handleSearch)\n  return (\n    <div>\n    filter shown with <input name=\"filter\" value={newSearch}  onChange={handleSearch}/>\n    </div>\n  )\n}\n\nconst PersonForm = ({process,newName,handleNameChange,newNumber,handleNumberChange}) => {\n  return (\n    <div>\n      <form onSubmit={process}>\n        <div> name: <input  name=\"name\" value={newName}  onChange={handleNameChange}/> </div>\n        <div> number: <input  name=\"number\" value={newNumber}  onChange={handleNumberChange}/> </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nconst Filter = ({persons,search,deletePerson}) => {\n  const filteredPersons = persons.filter( who => who.name.toLowerCase().includes(search.toLowerCase()) )\n  return (\n    <div>\n      <ul>\n        {filteredPersons.map(person => <li key={person.id}>\n           {person.name}  {person.number}   <button onClick={() => deletePerson(person.id)}> delete </button>\n           </li>)}\n      </ul>\n    </div>\n  )\n}\n\nconst Errornotif = ({message}) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className=\"error\">\n      {message}\n    </div>\n  )\n}\n\nconst Positivenotif = ({message}) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className=\"notif\">\n      {message}\n    </div>\n  )\n}\n\n\nconst App = () => {\n  console.log('const App loaded')\n  const [persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('') \n  const [ newNumber, setNewNumber ] = useState('') \n  const [ newSearch, setSearch ] = useState('') \n  const [notificationMessage, setNotificationMessage] = useState(null)\n  const [errorMsg, setErrorMsg] = useState(null)\n\n  const handleNameChange = (event) => {\n    console.log('handleNameChange',event.target.value)\n    setNewName(event.target.value)\n  }\n  const handleNumberChange = (event) => {\n    console.log('handleNumberChange',event.target.value)\n    setNewNumber(event.target.value)\n  }\n  const handleSearch = (event) => {\n    console.log('handleSearch',event.target.value)\n    setSearch(event.target.value)\n  }\n\n  console.log('this is App content of person: ',persons)\n  \n  const processPerson = (event) => {\n    console.log('This is processPerson event:',event)\n    console.log('this is checkP()',checkPerson()) \n    event.preventDefault()\n    checkPerson() \n    ? updateNumber(newName,newNumber)\n    : addPerson()   \n  }\n  \n  const addPerson = () => {\n    console.log('this is persons',persons)\n    const newid = persons.map(p => {return (p.id)})\n    const personObject = {\n      name: newName,\n      number: newNumber,\n      id: Math.max(...newid) + 1\n    }\n    console.log('this is personObject',personObject)\n    personSrv\n    .create(personObject)\n    .then(response => {\n      console.log('create person response: ',response)\n      updatePersons()\n      setNewName('')\n      setNewNumber('')\n      showNotif(personObject.name)\n    })\n    .catch(error => {\n      console.log(error.response.data)\n      setErrorMsg(error.response.data.error)\n      setTimeout(() => {\n          setErrorMsg(null)\n        }, 5000)\n      })\n    }\n    \n    const checkPerson = () => persons.find( who => who.name === newName && who.number !== newNumber )\n    \n    const deletePerson = (id) => {\n      if (window.confirm(`Do you really want to delete person iD ${id}`)) {\n        console.log('deletePerson:',persons)\n        personSrv.remove(id)\n        .then(\n          updatePersons()\n        )\n        .catch(error => {\n          setErrorMsg(`Note '${id}' was already removed from server`)\n          setTimeout(() => {\n              setErrorMsg(null)\n            }, 5000)\n          })\n        }\n    }\n    \n    const updatePersons = () => {\n      personSrv\n      .getAll()\n      .then(response => {\n        setPersons(response)\n      })\n    }\n    \n    const updateNumber = (newname,newnumber) => {\n      if (window.confirm(`Do you want to update ${newname} with ${newnumber}`)) {\n        let newperson = persons.find(p => p.name === newname)\n        \n        const newPersonObject = {\n          ...newperson,\n          number: newnumber\n        }\n        personSrv\n        .update(newPersonObject.id,newPersonObject)\n        .then(response => {\n          updatePersons(response)\n        })\n        .catch(error => {\n          setErrorMsg(error.response.data.error)\n          setTimeout(() => {\n              setErrorMsg(null)\n            }, 5000)\n          })\n      }\n    }\n    \n    const showNotif = (name) => {\n      setNotificationMessage(`Note '${name}' was added to the server`)\n      setTimeout(() => {\n        setNotificationMessage(null)\n      }, 5000)\n    }\n\n    useEffect(() => {\n      console.log('effect')\n      personSrv\n      .getAll()\n      .then(response => {\n        console.log('promise fulfilled')\n        setPersons(response)\n      })\n    }, [])\n      \n      \n      return (\n        <div>\n      <h2>Phonebook</h2>\n        <Errornotif message={errorMsg} />\n        <Positivenotif message={notificationMessage} />\n        <Search newSearch={newSearch} handleSearch={handleSearch}/>  \n      <h3> Add a new </h3>\n        <PersonForm \n          process={processPerson} \n          newName={newName} handleNameChange={handleNameChange} \n          newNumber={newNumber} handleNumberChange={handleNumberChange} \n          />\n      <h3>Numbers</h3>\n        <Filter persons={persons} search={newSearch} deletePerson={deletePerson}/>\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App'\n\nReactDOM.render(\n  <App />, \n  document.getElementById('root')\n)\n"],"sourceRoot":""}